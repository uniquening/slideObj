!function(){function t(){this.init()}function r(t,e){return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]}function c(t,e,o){t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent?t.attachEvent("on"+e,o):t["on"+e]=o}function d(t,e,o){t.removeEventListener?t.removeEventListener(e,o,!1):t.detachEvent?t.detachEvent("on"+e,o):t["on"+e]=null}t.prototype.init=function(){this.curIndex=0,this.timer=null,this.lock=!0,this.oBox=document.getElementById("box"),this.broadcastMe=this.oBox.getElementsByTagName("div")[0],this.broadcastMeList=this.broadcastMe.getElementsByTagName("div")[0],this.broadcastMeItem=this.broadcastMeList.getElementsByTagName("div"),this.itemLen=this.broadcastMeItem.length,this.moveWidth=this.broadcastMeItem[0].offsetWidth,this.broadcastMeList.style.width=this.moveWidth*this.itemLen+"px";for(var t=0;t<this.broadcastMeItem.length;t++)this.broadcastMeItem[t].style.width=this.moveWidth+"px";this.broadcastMe.style.width=this.moveWidth+"px",this.broadcastMeTool=document.getElementById("broadcastMe-tool"),this.broadcastMeSpot=this.broadcastMeTool.getElementsByTagName("div"),MeToolWidth=parseInt(r(this.broadcastMeTool,"width")),this.broadcastMeTool.style.marginLeft="-75px",this.broadcastMeBtnLeft=document.getElementById("broadcastMe-btn-left"),this.broadcastMeBtnRight=document.getElementById("broadcastMe-btn-right"),this.timer=setTimeout(this.autoMove.bind(this),3e3),this.bindEvent()},t.prototype.autoMove=function(t,e){var o=this,i=parseInt(r(this.broadcastMeList,"margin-left")),a=this.moveWidth,n=this.itemLen-2;clearTimeout(o.timer),o.lock&&(o.lock=!1,t&&"toRight"!=t?"toLeft"==t&&(0==i&&(o.broadcastMeList.style.marginLeft=-a*(n+1)+"px",o.curIndex=n+1),o.curIndex--,o.renderSpot(o.curIndex),i=parseInt(r(this.broadcastMeList,"margin-left")),o.startMove(o.broadcastMeList,{"margin-left":i+a},function(){e||(o.timer=setTimeout(o.autoMove.bind(o),3e3)),o.lock=!0})):(o.curIndex++,i==-a*n&&(o.curIndex=0),o.renderSpot(o.curIndex),o.startMove(o.broadcastMeList,{"margin-left":i-a},function(){i==-a*n&&(o.broadcastMeList.style.marginLeft="0px",o.curIndex=0),e||(o.timer=setTimeout(o.autoMove.bind(o),3e3)),o.lock=!0})))},t.prototype.bindEvent=function(){var s=this;c(s.broadcastMeBtnLeft,"click",function(){s.autoMove("toLeft",!0)}),c(s.broadcastMeBtnRight,"click",function(){s.autoMove("toRight",!0)}),c(s.broadcastMe,"mouseenter",function(){clearTimeout(s.timer)}),c(s.broadcastMe,"mouseleave",function(){s.timer=setTimeout(s.autoMove.bind(s),3e3)});for(var t=0;t<this.broadcastMeSpot.length;t++)!function(e){c(s.broadcastMeSpot[e],"click",function(t){s.lock=!1,clearTimeout(s.timer),s.curIndex=e,s.renderSpot(s.curIndex),s.startMove(s.broadcastMeList,{"margin-left":-e*s.moveWidth},function(){s.lock=!0})}),c(s.broadcastMeSpot[e],"touchend",function(t){s.lock=!1,clearTimeout(s.timer),s.curIndex=e,s.renderSpot(s.curIndex),s.startMove(s.broadcastMeList,{"margin-left":-e*s.moveWidth},function(){s.lock=!0})})}(t);c(s.broadcastMe,"touchstart",function(t){var i=s;t.returnValue=!1,i.offsetTop;var o=t.targetTouches[0],a={},n={x:o.pageX,y:o.pageY};function r(t){var e=i;t.returnValue=!1;var o=t.targetTouches[0];[(a={x:o.pageX,y:o.pageY}).x-n.x,(a.y,n.y)][0]<0?e.autoMove("toRight",!0):e.autoMove("toLeft",!0)}c(i.broadcastMe,"touchmove",r),c(i.broadcastMe,"touchend",function(t){var e=i;t.returnValue=!1,d(e.broadcastMe,"touchmove",r),d(e.broadcastMe,"touchstart",o)})})},t.prototype.renderSpot=function(t){for(var e=0;e<this.broadcastMeSpot.length;e++)this.broadcastMeSpot[e].className="";this.broadcastMeSpot[t].className="active"},t.prototype.startMove=function(o,i,a){clearInterval(o.timer),void 0!==i.opacity&&(i.opacity*=100),o.timer=setInterval(function(){var t=!0;for(var e in i)iCur="opacity"==e?100*parseFloat(r(o,e)):parseInt(r(o,e)),iSpeed=(i[e]-iCur)/7,iSpeed=0<iSpeed?Math.ceil(iSpeed):Math.floor(iSpeed),o.style[e]="opacity"==e?(iCur+iSpeed)/100:iCur+iSpeed+"px",iCur!=i[e]&&(t=!1);t&&(clearInterval(o.timer),"function"==typeof a&&a())},30)},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),o=this,i=function(){},a=function(){return o.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,a.prototype=new i,a}),window.slider=slider=function(){return new t({})}}(window),slider();